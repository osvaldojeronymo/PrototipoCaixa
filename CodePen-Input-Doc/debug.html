<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - Imóveis e Locadores</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .debug { background: #ffe6e6; padding: 10px; margin: 10px 0; border: 1px solid #ff9999; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Debug - Teste de Funcionalidade</h1>
        
        <div class="debug" id="debug-info">
            Carregando...
        </div>
        
        <div class="imovel-info" id="imovel-info">
            <strong>Imóvel:</strong> Carregando...
        </div>
        
        <h2>Locadores vinculados ao imóvel</h2>
        <table class="table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nome</th>
                    <th>Tipo</th>
                    <th>CPF/CNPJ</th>
                    <th>Documentos Entregues</th>
                </tr>
            </thead>
            <tbody id="tabelaLocadores">
                <tr><td colspan="5">Carregando dados...</td></tr>
            </tbody>
        </table>
    </div>

    <script>
        console.log('Script de debug iniciado');
        
        // Dados simplificados para teste
        const imoveis = [
            {
                id: 1,
                endereco: "Av. Paulista, 1578 - Bela Vista - São Paulo/SP",
                tipo: "Comercial",
                area: "250m²"
            }
        ];

        const locadores = [
            {
                id: 1,
                nome: "João Silva Santos",
                tipo: "Pessoa Física",
                cpf: "123.456.789-01",
                documentos: {
                    "Matrícula do Imóvel": true,
                    "Certidão Negativa IPTU": true,
                    "Documento de Identidade": true,
                    "CND Federal": false,
                }
            },
            {
                id: 2,
                nome: "Maria Oliveira Lima",
                tipo: "Pessoa Física",
                cpf: "987.654.321-02",
                documentos: {
                    "Matrícula do Imóvel": false,
                    "Certidão Negativa IPTU": false,
                    "Documento de Identidade": true,
                    "CND Federal": true,
                }
            },
            {
                id: 3,
                nome: "Imobiliária Prime LTDA",
                tipo: "Pessoa Jurídica",
                cnpj: "12.345.678/0001-90",
                documentos: {
                    "Matrícula do Imóvel": true,
                    "CNPJ": true,
                    "Ato Constitutivo": true,
                    "Procuração": false,
                }
            }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM carregado - iniciando debug...');
            
            const debugInfo = document.getElementById('debug-info');
            debugInfo.innerHTML = `
                <strong>Status:</strong> DOM carregado<br>
                <strong>Total de imóveis:</strong> ${imoveis.length}<br>
                <strong>Total de locadores:</strong> ${locadores.length}<br>
                <strong>Timestamp:</strong> ${new Date().toLocaleString()}
            `;
            
            // Atualizar info do imóvel
            const imovelInfo = document.getElementById('imovel-info');
            if (imovelInfo) {
                imovelInfo.innerHTML = `<strong>Imóvel ${imoveis[0].id}:</strong> ${imoveis[0].endereco} - ${imoveis[0].tipo} (${imoveis[0].area})`;
            }
            
            // Atualizar tabela
            const tbody = document.getElementById('tabelaLocadores');
            if (tbody) {
                tbody.innerHTML = '';
                
                locadores.forEach(locador => {
                    const docsEntregues = Object.values(locador.documentos).filter(Boolean).length;
                    const totalDocs = Object.keys(locador.documentos).length;
                    
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${locador.id}</td>
                        <td>${locador.nome}</td>
                        <td>${locador.tipo}</td>
                        <td>${locador.cpf || locador.cnpj}</td>
                        <td>${docsEntregues}/${totalDocs}</td>
                    `;
                    tbody.appendChild(row);
                });
                
                console.log('Tabela atualizada com sucesso!');
                debugInfo.innerHTML += '<br><strong>Tabela:</strong> Carregada com sucesso!';
            } else {
                console.error('Elemento tbody não encontrado!');
                debugInfo.innerHTML += '<br><strong>ERRO:</strong> tbody não encontrado!';
            }
        });
    </script>
</body>
</html>
